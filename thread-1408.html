<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>get_iplayer forums - A problem with unwanted (&amp; unsuccessful) downloads with the PVR</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="screen.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
<nav class="navbar">
<div class="nav-container">
<ul class="">
<li> <a href="https://www.squarepenguin.co.uk/"> Home </a></li>
<li> <a href="https://www.squarepenguin.co.uk/blog/" class=""> Blog </a></li>
<li> <a href="https://www.squarepenguin.co.uk/features/" class=""> Features </a></li>
<li> <a href="https://www.squarepenguin.co.uk/faqs/" class=""> FAQ </a></li>
<li> <a href="https://www.squarepenguin.co.uk/downloads/" class=""> Downloads </a></li>
<li> <a href="https://www.squarepenguin.co.uk/wiki/" class=""> Wiki </a></li>
<li> <a href="https://www.squarepenguin.co.uk/guides/" class=""> Guides </a></li>
<li> <a href="https://forums.squarepenguin.co.uk/" class=""> Forums </a></li>
</ul>
</div>
</nav>
<div id="container">
<h1 class="forumtitle">get_iplayer forums</h1>
<h3 class="forumsubtitle">Forum archived. Posting disabled.</h3>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-8.html">Windows Forums</a> &gt; <a href="forum-6.html">Windows Troubleshooting</a> &gt; A problem with unwanted (&amp; unsuccessful) downloads with the PVR</div>
<div id="pagetitle"><h2>A problem with unwanted (&amp; unsuccessful) downloads with the PVR</h2></div>
<div id="content">
<div class="post">
<div class="header">
<div class="author"><h2>user-1827</h2></div><div class="dateline">15-05-2017, 07:55 PM</div>
</div>
<div class="message">(I've read the FAQ, the Rules &amp; Release Notes, and didn't find any <br />
answer in the bits of them that I understood, sorry...<br />
System specs / settings at end.<br />
<br />
A variant of the problem existed late-on in v2.9x too, details at foot of <br />
page if you want them.)<br />
<br />
------------<br />
<br />
The problem is that the WEB_PVR is attempting to download programme(s) <br />
that I've not asked it for. <br />
<br />
Now with V3.x It's determined to download "Radio 2's Comedy Showcase - <br />
Hamilton's Ode-ssey, BBC Radio 4 Extra, b00s7m1t"<br />
It never succeeds.<br />
I emphatically have not asked for it.<br />
<br />
I have tried the "exclude programme" function in WEB_PVR and the <br />
get_iplayer --pvr-disable=Hamilton's_Ode-ssey command in the CLi, <br />
(but this doesn't show under "get_iplayer --prefs-show", should it?) <br />
Neither has any effect on the problem. (I tried it with and without <br />
the apostrophe.)<br />
<br />
I've also tried downloading the programme manually to see if having <br />
it in the download history would make any difference, it didn't.<br />
<br />
-------------<br />
<br />
May be relevant..? I only mention it here as it "seems" to have got <br />
worse since it's been trying to download "Hamilton's Ode-ssey".<br />
<br />
It seems to be taking days to find new editions of programmes in the <br />
schedule, so I'm getting nervous about missing episodes of radio <br />
series. Is there an upper limit to how long I should wait before <br />
considering a programmed "lost" to web_pvr's cache?<br />
<br />
There are warnings about problems with the PVR cache not updating <br />
reliably in the notes for v3.01, to do with web scraping I think, but <br />
it was mostly beyond my understanding. <br />
Those episodes that WEB_PVR doesn't find are happily downloading via<br />
the recursive command in the CLi.<br />
<br />
--------------------<br />
<br />
Settings &amp; Specs:<br />
<br />
I've attached a log file generated by running the PVR from within the CLi.<br />
<br />
I'm using fully updated W7 Pro 64bit, i7 cpu with 32GB of RAM.<br />
WEB_PVR is running in IE11, v11.0.42<br />
Output is to an internal SSD.<br />
<br />
It's v3.01 of GiP, but the problem was present on v3.0 too, and is <br />
the reason why I upgraded to v3.01, (which was installed over the top <br />
of v3.0 without uninstalling, as v3.0 was over v2.9x).<br />
<br />
I have GiP set to load only the Radio listings for R4, R4E &amp; R6music, <br />
named as per the list buried in the online help, and have never tried <br />
to download, search or stream any TV stuff.<br />
<br />
---------------------<br />
<br />
A similar problem was there for me in the last couple of months of v2.9x, <br />
wherein it spontaneously started downloading "Don Letts Culture Clash Radio" <br />
&amp; "the Radio 4 Appeal" every week, and "Recycled Radio" when it was on. It <br />
persisted with this 'till v3.0 arrived<br />
It was no real effort to delete them so I didn't pursue the problem. I always <br />
assumed that it was to do with having "Radio" in the title in some obscure way? <br />
That was the only thing the random downloads had in common that I could see...</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">15-05-2017, 08:07 PM</div>
</div>
<div class="message">log file missing</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1827</h2></div><div class="dateline">15-05-2017, 08:20 PM</div>
</div>
<div class="message">Sorry 'bout that, definitely did it but must have missed a step.<br />
should be here now.<br />
Have also attached a screengrab of the web_pvr running, just in case it helps...<br/><br/>
<a href="static/thread-1408-failing_pvr_log.txt">failing_pvr_log.txt</a><br/><br/>
<a href="static/thread-1408-Clipboard01.jpg"><img src="static/thread-1408-Clipboard01.jpg"/></a>
<br />
</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">15-05-2017, 08:26 PM</div>
</div>
<div class="message">You should have noticed from the search arguments in the log that you've messed up a number of your PVR searches. Example:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>INFO: Search args: '^Hancock's Half Hour&#36;','(Documents&#92;Radio|Stuff&#92;Downloaded|Radio)'</code></div></div>You already know why that finds unwanted programmes.<br />
<br />
EDIT: Next time, save yourself some trouble and check your PVR searches with <kbd>--pvr-list</kbd> first.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1827</h2></div><div class="dateline">15-05-2017, 08:47 PM</div>
</div>
<div class="message">Thanks for that. <br />
It's very odd, though as I've never edited them, beyond manually removing "podcast" from the "pvrsearch" value from some entries when v3.0 objected to them at first use. <br />
All the entries in the list have been generated by the web-pvr "search / add series" command, not by manual entry through the CLi.<br />
They've never been exported / imported / restored, so from here it looks as if those errors have occurred spontaneously with the installation of v3.0. Is that possible? (Although it was misbehaving in v2.9x, so maybe not...)<br />
<br />
I'll go away now and edit them...<br />
thanks again. Hope I won't be back later!<br />
<br />
(PS, would I understand if you tried to explain why it had seized on that particular programme, of all the ones available?)<br />
<br />
Get_iPlayer is a lifeline to me as I work on my own full time, and a ready supply of R4 / R4E stuff is all that stands between me and total loss of sanity, so all your work on it over the years really is much appreciated.<br />
<br />
Thanks again, ed.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1827</h2></div><div class="dateline">15-05-2017, 09:22 PM</div>
</div>
<div class="message">Turns out that I'm even more stupid than you thought, sorry.<br />
I went to edit the entries and realised immediately that I can't see what's up with the search string example you posted after all...<br />
<br />
When I posted my response to it I was looking at the spacers GiP had inserted into the output path, and the "&#36;" appended onto the programme name. I compared the Hancock entry with one that web_pvr generated for a series record that I set up just now, and they look much the same to me.<br />
<br />
Some of the entries have the output path displayed as "search1", some as "search0" and some not at all, is that it?<br />
<br />
Is there a primer page you can point me to that will teach me to pick the relevant bones out of the log file?<br />
<br />
I assume that the &#36; symbol allows for a variable, in this case presumably an episode name or number?<br />
My limited (= some BBC Basic in the 80s) coding knowledge means that either I'm looking in the wrong place, or not recognising the fault when it's in front of me. Remember that all those entries were generated by the web_pvr's "add series" function, not by me.<br />
<br />
ed.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">15-05-2017, 11:27 PM</div>
</div>
<div class="message">Remove the lines with bogus search arg from all your pvr search files. Don't try to fix them in the Web PVR. Edit the files containing the broken pvr searches directly in a text editor. Ensure that each file is left with one entry keyed as "search0" that has the correct search term as its value.<br />
<br />
The "&#36;" doesn't designate a variable. It designates a regular expression. Google if you're curious.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1827</h2></div><div class="dateline">16-05-2017, 12:55 AM</div>
</div>
<div class="message">Had a look at the Wiki entry for regex, and the one that you link to somewhere in the depths of the instructions. Hmm. I can see the concept in a foggy way, but I think the execution is beyond me. My background is all with mechanical systems, if I can't see it move I struggle to understand it. That's probably why I work on my own...<br />
<br />
Had a stiff drink and fiddled with the PVR folder's contents as you directed, and the "pvr list" page in web pvr is much tidier now, it used to require scrolling to get to the bottom, but now occupies half a page. I'm sure I didn't delete that much, though one programme had managed to accrue four layers of searches...<br />
<br />
I'd already downloaded most of my outstanding stuff manually so it only had one programme to fetch when I tried it just now, but it did it quickly and with no error messages.<br />
<br />
Wonder if that would have fixed the similar problem I was having with v2.9x?<br />
<br />
Thanks very much for your patience and indulgence this evening, and for getting v3.0 out so quickly after they broke 2.9, I assume that that was a team effort as it smelled of a complete rewrite from out here in simple end-user land? <br />
<br />
ed.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1135</h2></div><div class="dateline">16-05-2017, 08:45 AM</div>
</div>
<div class="message">First of all you can specify globally where you save your files, e.g. for windows:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>get_iplayer --prefs-add --output "c:&#92;my&#92;download&#92;directory"</code></div></div><br />
Here are a couple of radio search examples, as seen in a text editor. I also don't understand regex to any great extent, however strings with a "&#36;" are matched exactly, whereas strings without are matched as "beginning with"<br />
so:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>fields name<br />
subtitles 0<br />
thumb 0<br />
type radio<br />
search0 ^Rob Newman's Neuropolis: Series 1&#36;</code></div></div>Will only work for series 1<br />
<br />
Whilst:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>fields name<br />
subtitles 0<br />
thumb 0<br />
type radio<br />
search0 ^Just a Minute</code></div></div>Will work for any series of "Just a Minute" (as it doesn't have the "&#36;" so will work with any string whose first bit matches the search term)<br />
<br />
What I would suggest is that you set your output directory, then move all your searches to a backup directory, then recreate the searches with the web front end.<br />
<br />
Once they are recreated you can have a look at them with a text editor and that might help you understand a bit better on what to look for when they go wrong.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1815</h2></div><div class="dateline">16-05-2017, 09:19 AM</div>
</div>
<div class="message">In a minor expansion to roga's answer<br />
<br />
^ means must start at the beginning<br />
&#36; means finish at the end<br />
<br />
So "Just a Minute" will match and program containing the text "Just a Minute"<br />
Matching Example - When <span style="font-weight: bold;" class="mycode_b">Just a Minute</span> First Started<br />
<br />
"^Just a Minute" will not match the example above<br />
Matching Example - Just a Minute: Series 99<br />
<br />
"^Just a Minute&#36; will not match either of the examples above</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1827</h2></div><div class="dateline">16-05-2017, 11:08 AM</div>
</div>
<div class="message">Ok, that clarifies it, thanks!<br />
<br />
I nobbled the PVR list found within my ".Get_iPlayer" folder using notepad, and all is well, though now I have a clearer understanding of how it works, and as that it's still working a few hours later, I'll tweak some of the entries as I would like them to be enduring, rather than by series.<br />
<br />
Simply searching for "Hancock" might be a problem, though. I'm sure Nick Hancock is a lovely chap, but I've no interest in football whatsoever, so that'll probably require two searches, "Hancock's Half Hour" and "missing Hancocks". Does it care about apostrophes? A moderate learning curve awaits, I suspect...<br />
<br />
I'd still love to know how and why the searches became corrupted though.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1135</h2></div><div class="dateline">16-05-2017, 12:30 PM</div>
</div>
<div class="message"><blockquote class="mycode_quote"><cite>Quote:</cite>Simply searching for "Hancock" might be a problem</blockquote>
If you have <br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>"^Hancock"</code></div></div> Then it will only match string which begin with "Hancock". If you miss out the "^" then it will match any string with "Hancock" in it, e.g. Nick Hancock.<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite>Does it care about apostrophes?</blockquote>
Some punctuation is problematic, and you have to use escape characters e.g:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>fields name<br />
subtitles 0<br />
thumb 0<br />
type radio<br />
search0 ^The Invention of&#92;.&#92;.&#92;.: The USA&#36;</code></div></div><br />
However I think apostrophes are OK as I also have:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>fields name<br />
subtitles 0<br />
thumb 0<br />
type radio<br />
search0 ^Boswell's Lives</code></div></div><br />
However as I am not that conversant with regex, I usually use the web front end to deal with any entries that might be problematic.<br />
<br />
BTW i have set many items as global defaults so my search expressions are quite simple. To further decrease poor matches you could set your defaults to particular radio channels. See e.g. from <a href="https://github.com/get-iplayer/get_iplayer/wiki/documentation">https://github.com/get-iplayer/get_iplay...umentation</a>:<br />
<blockquote class="mycode_quote"><cite>Quote:</cite>Index only Radio 4 and Radio 4 Extra (assumes --type in preferences includes "radio"). The string "Radio 4" will match both channels:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>get_iplayer --prefs-add --refresh-include="Radio 4"</code></div></div><br />
Index only Radio 4 (assumes --type in preferences includes "radio"). The regular expression "Radio 4&#36;" will match only Radio 4:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>get_iplayer --prefs-add --refresh-include="Radio 4&#36;"</code></div></div></blockquote>
</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1827</h2></div><div class="dateline">18-05-2017, 01:09 AM</div>
</div>
<div class="message">The series called "The Missing Hancocks" would be a problem with "^Hancock"? It doesn't matter as having two carefully chosen searches is hardly a problem, just trying to get a better understanding of what's going on behind the scenes if I set a series record with the web front end, and a better understanding too of why unexpected things sometimes happen.<br />
I am already set to ignore everything except R4, R4E &amp; R6, which helps a great deal, wish I'd set it years ago, but it is a trait of mine only to get to grips with the controls after something has gone wrong. <br />
I'll look into the escape characters problem as I've not even spotted them in any of the instructions thus far. From memory the example title you give does contain a colon, so presumably that is the punctuation that the escape characters are helping to sidestep?</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1135</h2></div><div class="dateline">18-05-2017, 08:47 AM</div>
</div>
<div class="message"><blockquote class="mycode_quote"><cite><span> (18-05-2017, 01:09 AM)</span></cite>I'll look into the escape characters problem as I've not even spotted them in any of the instructions thus far. From memory the example title you give does contain a colon, so presumably that is the punctuation that the escape characters are helping to sidestep?</blockquote><br />
I think it is the full stop, but I have also noticed it with other characters, as I said I am not an expert in regex, so I don't really know which characters you have to be careful with.<br />
<br />
What I often do is create a new serach by copying and editing a previous one, If it doesn't work as expected then I'll use the web front end.<br />
<br />
So my limited understanding is from an experimental approach rather than an understanding of the principles involved, however I have just googled and found the following at: <a href="http://www.regular-expressions.info/quickstart.html">http://www.regular-expressions.info/quickstart.html</a><br />
<blockquote class="mycode_quote"><cite>Quote:</cite>Twelve characters have special meanings in regular expressions: the backslash \, the caret ^, the dollar sign &#36;, the period or dot ., the vertical bar or pipe symbol |, the question mark ?, the asterisk or star *, the plus sign +, the opening parenthesis (, the closing parenthesis ), the opening square bracket [, and the opening curly brace {. These special characters are often called "metacharacters". Most of them are errors when used alone.<br />
<br />
If you want to use any of these characters as a literal in a regex, you need to escape them with a backslash. If you want to match 1+1=2, the correct regex is 1\+1=2. Otherwise, the plus sign has a special meaning.</blockquote>
</div>
</div>
</div>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-8.html">Windows Forums</a> &gt; <a href="forum-6.html">Windows Troubleshooting</a> &gt; A problem with unwanted (&amp; unsuccessful) downloads with the PVR</div>
</div>
<div class="footer">
<div class="footer-text">
<p class="footernote"> Site design Copyright &copy; SquarePenguin; <a href="http://creativecommons.org/licenses/by/4.0/">some rights reserved.</a></p>
<p class="footernote"><a href="https://www.squarepenguin.co.uk/attribution/">Attribution of Licensed Works</a></p>
</div>
</div>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
</body>
</html>
