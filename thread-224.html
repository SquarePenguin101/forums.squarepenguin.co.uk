<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>get_iplayer forums - Recording incomplete - Command Line output using --force</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="screen.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
<nav class="navbar">
<div class="nav-container">
<ul class="">
<li> <a href="https://www.squarepenguin.co.uk/"> Home </a></li>
<li> <a href="https://www.squarepenguin.co.uk/blog/" class=""> Blog </a></li>
<li> <a href="https://www.squarepenguin.co.uk/features/" class=""> Features </a></li>
<li> <a href="https://www.squarepenguin.co.uk/faqs/" class=""> FAQ </a></li>
<li> <a href="https://www.squarepenguin.co.uk/downloads/" class=""> Downloads </a></li>
<li> <a href="https://www.squarepenguin.co.uk/wiki/" class=""> Wiki </a></li>
<li> <a href="https://www.squarepenguin.co.uk/guides/" class=""> Guides </a></li>
<li> <a href="https://forums.squarepenguin.co.uk/" class=""> Forums </a></li>
</ul>
</div>
</nav>
<div id="container">
<h1 class="forumtitle">get_iplayer forums</h1>
<h3 class="forumsubtitle">Forum archived. Posting disabled.</h3>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-8.html">Windows Forums</a> &gt; <a href="forum-6.html">Windows Troubleshooting</a> &gt; Recording incomplete - Command Line output using --force</div>
<div id="pagetitle"><h2>Recording incomplete - Command Line output using --force</h2></div>
<div id="content">
<div class="post">
<div class="header">
<div class="author"><h2>user-520</h2></div><div class="dateline">20-10-2014, 05:56 AM</div>
</div>
<div class="message">Hi - this is the output I get when trying <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>get_iplayer --pid=p0276pc3</code></div></div><br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>C:&#92;Program Files (x86)&gt;get_iplayer --pid=p0276pc3 --force<br />
get_iplayer v2.87, Copyright (C) 2008-2010 Phil Lewis<br />
&nbsp;&nbsp;This program comes with ABSOLUTELY NO WARRANTY; for details use --warranty.<br />
&nbsp;&nbsp;This is free software, and you are welcome to redistribute it under certain<br />
&nbsp;&nbsp;conditions; use --conditions for details.<br />
<br />
INFO Trying to stream pid using type tv<br />
INFO: pid found in cache<br />
Matches:<br />
518:&nbsp;&nbsp;&nbsp;&nbsp;Human Universe - 1. Apeman - Spaceman, BBC Two, Factual,Science &amp; Nature<br />
,Science &amp; Technology,TV, default<br />
<br />
INFO: 1 Matching Programmes<br />
INFO: Checking existence of default version<br />
INFO: flashvhigh1,flashvhigh2,flashhigh1,flashhigh2,flashstd1,flashstd2,flashlow<br />
1,flashlow2 modes will be tried for version default<br />
INFO: Trying flashvhigh1 mode to record tv: Human Universe - 1. Apeman - Spacema<br />
n<br />
INFO: File name prefix = Human_Universe_-_1._Apeman_-_Spaceman_p0276pc3_default<br />
<br />
RTMPDump v2.4<br />
(c) 2010 Andrej Stepanchuk, Howard Chu, The Flvstreamer Team; license: GPL<br />
Connecting ...<br />
INFO: Connected...<br />
Starting download at: 0.000 kB<br />
INFO: Metadata:<br />
INFO:&nbsp;&nbsp; duration&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3542.04<br />
INFO:&nbsp;&nbsp; moovPosition&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;36.00<br />
INFO:&nbsp;&nbsp; width&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 832.00<br />
INFO:&nbsp;&nbsp; height&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;468.00<br />
INFO:&nbsp;&nbsp; videocodecid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;avc1<br />
INFO:&nbsp;&nbsp; audiocodecid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mp4a<br />
INFO:&nbsp;&nbsp; avcprofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;77.00<br />
INFO:&nbsp;&nbsp; avclevel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;31.00<br />
INFO:&nbsp;&nbsp; aacaot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.00<br />
INFO:&nbsp;&nbsp; videoframerate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;25.00<br />
INFO:&nbsp;&nbsp; audiosamplerate&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 48000.00<br />
INFO:&nbsp;&nbsp; audiochannels&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2.00<br />
INFO: trackinfo:<br />
INFO:&nbsp;&nbsp; length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;88551000.00<br />
INFO:&nbsp;&nbsp; timescale&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 25000.00<br />
INFO:&nbsp;&nbsp; language&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;und<br />
INFO: sampledescription:<br />
INFO:&nbsp;&nbsp; sampletype&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;avc1<br />
INFO:&nbsp;&nbsp; length&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;170017792.00<br />
INFO:&nbsp;&nbsp; timescale&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 48000.00<br />
INFO:&nbsp;&nbsp; language&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;und<br />
INFO: sampledescription:<br />
INFO:&nbsp;&nbsp; sampletype&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mp4a<br />
4861.569 kB / 26.40 sec (0.7%)<br />
ERROR: RTMP_ReadPacket, failed to read RTMP packet header<br />
4909.823 kB / 26.40 sec (0.7%)<br />
INFO: Connection timed out, trying to resume.<br />
<br />
Resuming download at: 4909.823 kB<br />
ERROR: RTMP_ReadPacket, failed to read RTMP packet header<br />
4909.823 kB / 0.00 sec<br />
INFO: Connection timed out, trying to resume.<br />
<br />
Resuming download at: 4909.823 kB<br />
4909.823 kB / 26.00 sec<br />
Download complete<br />
ffmpeg version 2.2.3 Copyright (c) 2000-2014 the FFmpeg developers<br />
&nbsp;&nbsp;built on Jun 19 2014 20:24:25 with gcc 4.8.3 (GCC)<br />
&nbsp;&nbsp;configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-av<br />
isynth --enable-bzlib --enable-fontconfig --enable-frei0r --enable-gnutls --enab<br />
le-iconv --enable-libass --enable-libbluray --enable-libcaca --enable-libfreetyp<br />
e --enable-libgme --enable-libgsm --enable-libilbc --enable-libmodplug --enable-<br />
libmp3lame --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libope<br />
njpeg --enable-libopus --enable-librtmp --enable-libschroedinger --enable-libsox<br />
r --enable-libspeex --enable-libtheora --enable-libtwolame --enable-libvidstab -<br />
-enable-libvo-aacenc --enable-libvo-amrwbenc --enable-libvorbis --enable-libvpx<br />
--enable-libwavpack --enable-libwebp --enable-libx264 --enable-libx265 --enable-<br />
libxavs --enable-libxvid --enable-decklink --enable-zlib<br />
&nbsp;&nbsp;libavutil&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;52. 66.100 / 52. 66.100<br />
&nbsp;&nbsp;libavcodec&nbsp;&nbsp;&nbsp;&nbsp; 55. 52.102 / 55. 52.102<br />
&nbsp;&nbsp;libavformat&nbsp;&nbsp;&nbsp;&nbsp;55. 33.100 / 55. 33.100<br />
&nbsp;&nbsp;libavdevice&nbsp;&nbsp;&nbsp;&nbsp;55. 10.100 / 55. 10.100<br />
&nbsp;&nbsp;libavfilter&nbsp;&nbsp;&nbsp;&nbsp; 4.&nbsp;&nbsp;2.100 /&nbsp;&nbsp;4.&nbsp;&nbsp;2.100<br />
&nbsp;&nbsp;libswscale&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;&nbsp;5.102 /&nbsp;&nbsp;2.&nbsp;&nbsp;5.102<br />
&nbsp;&nbsp;libswresample&nbsp;&nbsp; 0. 18.100 /&nbsp;&nbsp;0. 18.100<br />
&nbsp;&nbsp;libpostproc&nbsp;&nbsp;&nbsp;&nbsp;52.&nbsp;&nbsp;3.100 / 52.&nbsp;&nbsp;3.100<br />
Input #0, flv, from 'R:&#92;Users&#92;darren&#92;Desktop&#92;iPlayer Recordings&#92;Human_Universe_-<br />
_1._Apeman_-_Spaceman_p0276pc3_default.partial.mp4.flv':<br />
&nbsp;&nbsp;Metadata:<br />
&nbsp;&nbsp;&nbsp;&nbsp;moovPosition&nbsp;&nbsp;&nbsp;&nbsp;: 36<br />
&nbsp;&nbsp;&nbsp;&nbsp;avcprofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 77<br />
&nbsp;&nbsp;&nbsp;&nbsp;avclevel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 31<br />
&nbsp;&nbsp;&nbsp;&nbsp;aacaot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;videoframerate&nbsp;&nbsp;: 25<br />
&nbsp;&nbsp;&nbsp;&nbsp;audiochannels&nbsp;&nbsp; : 2<br />
&nbsp;&nbsp;Duration: 00:59:02.04, start: 0.000000, bitrate: 11 kb/s<br />
&nbsp;&nbsp;&nbsp;&nbsp;Stream #0:0: Video: h264 (Main), yuv420p, 832x468 [SAR 1:1 DAR 16:9], 25 fps<br />
, 25 tbr, 1k tbn, 50 tbc<br />
&nbsp;&nbsp;&nbsp;&nbsp;Stream #0:1: Audio: aac, 48000 Hz, stereo, fltp<br />
Output #0, mp4, to 'R:&#92;Users&#92;darren&#92;Desktop&#92;iPlayer Recordings&#92;Human_Universe_-_<br />
1._Apeman_-_Spaceman_p0276pc3_default.partial.mp4':<br />
&nbsp;&nbsp;Metadata:<br />
&nbsp;&nbsp;&nbsp;&nbsp;moovPosition&nbsp;&nbsp;&nbsp;&nbsp;: 36<br />
&nbsp;&nbsp;&nbsp;&nbsp;avcprofile&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 77<br />
&nbsp;&nbsp;&nbsp;&nbsp;avclevel&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 31<br />
&nbsp;&nbsp;&nbsp;&nbsp;aacaot&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;: 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;videoframerate&nbsp;&nbsp;: 25<br />
&nbsp;&nbsp;&nbsp;&nbsp;audiochannels&nbsp;&nbsp; : 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;encoder&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; : Lavf55.33.100<br />
&nbsp;&nbsp;&nbsp;&nbsp;Stream #0:0: Video: h264 ([33][0][0][0] / 0x0021), yuv420p, 832x468 [SAR 1:1<br />
 DAR 16:9], q=2-31, 25 fps, 16k tbn, 1k tbc<br />
&nbsp;&nbsp;&nbsp;&nbsp;Stream #0:1: Audio: aac ([64][0][0][0] / 0x0040), 48000 Hz, stereo<br />
Stream mapping:<br />
&nbsp;&nbsp;Stream #0:0 -&gt; #0:0 (copy)<br />
&nbsp;&nbsp;Stream #0:1 -&gt; #0:1 (copy)<br />
Press [q] to stop, [?] for help<br />
frame=&nbsp;&nbsp;661 fps=0.0 q=-1.0 Lsize=&nbsp;&nbsp;&nbsp;&nbsp;4895kB time=00:00:26.41 bitrate=1518.2kbits<br />
/s<br />
video:4574kB audio:301kB subtitle:0 data:0 global headers:0kB muxing overhead 0.<br />
385356%<br />
INFO: Recorded R:&#92;Users&#92;darren&#92;Desktop&#92;iPlayer Recordings&#92;Human_Universe_-_1._Ap<br />
eman_-_Spaceman_p0276pc3_default.mp4<br />
<br />
INFO: Downloaded Thumbnail to 'R:&#92;Users&#92;darren&#92;Desktop&#92;iPlayer Recordings&#92;Human_<br />
Universe_-_1._Apeman_-_Spaceman_p0276pc3_default.jpg'<br />
INFO: MP4 tagging MP4 file<br />
<br />
 Started writing to temp file.<br />
 Progress: &gt;&nbsp;&nbsp;0% -------------------------------------------------------|<br />
 Finished writing to temp file.</code></div></div></div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">20-10-2014, 12:43 PM</div>
</div>
<div class="message">Really?  You couldn't be bothered to excise the 120 lines generated because you mistyped the command?</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-30</h2></div><div class="dateline">20-10-2014, 03:13 PM</div>
</div>
<div class="message">OP's post has now been edited to remove unnecessary lines.<br />
<br />
Darren13 - perhaps you can sympathise with user-2, you obviously didn't want to read for yourself the voluminous output you posted here or you would have seen the very obvious connection time out. Noticing that would have lead you to the numerous posts on this forum and around the web describing the sensitive nature of RTMPdump and how it often has these sorts of issues for no good reason.<br />
<br />
When posting this sort of information you should, at the very least, wrap the pasted info in code tags so it displays in some sense of order. This can be done by selecting the text and clicking the 'code' button available in strip above the input box. <br />
<br />
For large outputs you should paste the output into a text file, save it as a .txt and attach it to your post.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">20-10-2014, 03:24 PM</div>
</div>
<div class="message">Apologies for the snark.  <br />
<br />
Bottom line: rtmpdump is guaranteed to fail sometimes, and it doesn't always signal to get_iplayer that it failed, thus you're left with a truncated file.  Read about the <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--check-duration</code></div></div> option in the 2.87 release notes.  It gives you an easy way to see that a file was truncated.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-520</h2></div><div class="dateline">21-10-2014, 11:30 AM</div>
</div>
<div class="message">Appreciate the apology, but no offence taken. It's a support forum, it's not like it's going to wreck anyone's life ;-)<br />
<br />
I've no idea what's relevant for you re: debugging / spotting stuff that isn't an error. I did take time to look through what I was pasting as feedback, but it's all Greek to me. <br />
<br />
Again, grateful for get_player, so thanks for your efforts, and apologies for the 120 lines that caused you offence.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-901</h2></div><div class="dateline">19-06-2015, 10:24 PM</div>
</div>
<div class="message">I take issue with the way that the RTMP_ReadPacket function is implemented in 2.3 and 2.4.  I have the same problem that you do, so I changed a few lines of code and it works much better.  The first time I used it and got that error...it retried about 24 times, got the right packet and went merrily on its way. No CPU spinning out of control, no retrying, no corrupted file.  Forgive me if I think the code was just written wrong.<br />
<br />
You can get the code from sourceforge, untar the archive and set up a compile directory.  I'm going to assume you can find out how to compile or that you don't want to, but for those that can/will, these are the changes to the code.<br />
<br />
All the changes are in librtmp/rtmp.c  There are only about 3 lines of changes, but I'll include all of both affected functions so you don't have a problem finding where the change is.<br />
<br />
EDIT: new code attached to following post</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-901</h2></div><div class="dateline">19-06-2015, 10:27 PM</div>
</div>
<div class="message">Crap; I just realized I could have attached the new code.  It's just the one file to be changed, librtmp/rtmp.c  You can overwrite it with this one, recompile and Bob's yer uncle!<br />
<br />
BTW, if you're ever recording something like a live sporting event, this is a really critical change.  I do 8 hour cricket matches, the four day SS in Australia, and the last thing you want is to come into the room 4 hours into the match to hear the CPU fan cranked to max and nothing being recorded.  With this fix you miss about 30 seconds, no tight loops.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">19-06-2015, 10:57 PM</div>
</div>
<div class="message">Did you really get that code from SourceForge?  If so, you should provide the link.  The diff between your code and the upstream master branch is way more than 3 lines, and your code reintroduces one bug that was patched 18 months ago, so I think you patched a rather old version. That doesn't mean it won't work for some people, but you should say exactly where you got the code you patched, so that anyone who applies your changes is forewarned that old bugs might resurface.  But you really should patch the latest source.</div>
</div>
</div>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-8.html">Windows Forums</a> &gt; <a href="forum-6.html">Windows Troubleshooting</a> &gt; Recording incomplete - Command Line output using --force</div>
</div>
<div class="footer">
<div class="footer-text">
<p class="footernote"> Site design Copyright &copy; SquarePenguin; <a href="http://creativecommons.org/licenses/by/4.0/">some rights reserved.</a></p>
<p class="footernote"><a href="https://www.squarepenguin.co.uk/attribution/">Attribution of Licensed Works</a></p>
</div>
</div>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
</body>
</html>
