<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>get_iplayer forums - WARNING: Unexpected size for file segment</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="screen.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" sizes="192x192" href="/nice-highres.png" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>
<body>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
<nav class="navbar">
<div class="nav-container">
<ul class="">
<li> <a href="https://www.squarepenguin.co.uk/"> Home </a></li>
<li> <a href="https://www.squarepenguin.co.uk/blog/" class=""> Blog </a></li>
<li> <a href="https://www.squarepenguin.co.uk/features/" class=""> Features </a></li>
<li> <a href="https://www.squarepenguin.co.uk/faqs/" class=""> FAQ </a></li>
<li> <a href="https://www.squarepenguin.co.uk/downloads/" class=""> Downloads </a></li>
<li> <a href="https://www.squarepenguin.co.uk/wiki/" class=""> Wiki </a></li>
<li> <a href="https://www.squarepenguin.co.uk/guides/" class=""> Guides </a></li>
<li> <a href="https://forums.squarepenguin.co.uk/" class=""> Forums </a></li>
</ul>
</div>
</nav>
<div id="container">
<h1 class="forumtitle">get_iplayer forums</h1>
<h3 class="forumsubtitle">Forum archived. Posting disabled.</h3>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-8.html">Windows Forums</a> &gt; <a href="forum-5.html">Windows General Help</a> &gt; WARNING: Unexpected size for file segment</div>
<div id="pagetitle"><h2>WARNING: Unexpected size for file segment</h2></div>
<div id="content">
<div class="post">
<div class="header">
<div class="author"><h2>user-991</h2></div><div class="dateline">05-11-2017, 05:52 PM</div>
</div>
<div class="message">After not having a Laptop for a month I only got one about a week ago &amp; so I installed the latest version of GiP, v3.06.<br />
My system now is an Intel i5 Gen. 6 processor with a 256GB SSD &amp; 8GB RAM running Windows 10 Home Edition.<br />
On my previous &amp; now broken Laptop I was running v2.97 or 2.99 &amp; all was OK including downloads.<br />
But now, using the same internet connection but better &amp; faster Laptop I've been getting a lot of the following problem.<br />
Below is just one programme but the problem over the course of the download occured many more times than what is shown here.<br />
It doesn't happen with all programmes but it happens too often &amp; it only tries to continue downloading about 5 times before I have to strart it manually again.<br />
<br />
WARNING: Unexpected size for file segment [465]<br />
WARNING: Expected: 2009720  Downloaded: 1994481<br />
WARNING: Retrying download<br />
INFO: Downloading tv: 'Gymnastics: World Championships: 2017 - 3. Women's All-Round Final (b097fd7c) [shortened]'<br />
INFO: Downloaded: 88.49 MiB (00:06:55) @ 1.22 Mibit/s (hvfhigh1) [audio+video]<br />
<br />
WARNING: Unexpected size for file segment [361]<br />
WARNING: Expected: 1690872  Downloaded: 1384321<br />
WARNING: Retrying download<br />
WARNING: Retrying tv: 'Gymnastics: World Championships: 2017 - 3. Women's All-Round Final (b097fd7c) [shortened]'<br />
INFO: Downloaded: 194.55 MiB (00:15:21) @ 1.93 Mibit/s (hvfhigh1) [audio+video]<br />
<br />
WARNING: Unexpected size for file segment [481]<br />
WARNING: Expected: 1696888  Downloaded: 1381583<br />
WARNING: Retrying download<br />
WARNING: Retrying tv: 'Gymnastics: World Championships: 2017 - 3. Women's All-Round Final (b097fd7c) [shortened]'<br />
INFO: Downloaded: 1.62 MiB (00:00:08) @ 0.40 Mibit/s (hvfhigh1) [audio+video]<br />
<br />
WARNING: Unexpected size for file segment [482]<br />
WARNING: Expected: 1757048  Downloaded: 375789<br />
WARNING: Retrying download<br />
<br />
<br />
Now today, when I've started downloading for the first time since last night I'm getting the following error with every programme I'm trying to download &amp; I've tried 5 different programmes.<br />
<br />
C:\WINDOWS\system32&gt;get_iplayer --url <a href="https://www.bbc.co.uk/iplayer/episode/b097rs7k/gardeners-world-2017-episode-28">https://www.bbc.co.uk/iplayer/episode/b0...episode-28</a> --tvmode=hlshd1<br />
get_iplayer 3.06.0, Copyright (C) 2008-2010 Phil Lewis<br />
This program comes with ABSOLUTELY NO WARRANTY; for details use --warranty.<br />
This is free software, and you are welcome to redistribute it under certain<br />
conditions; use --conditions for details.<br />
<br />
ERROR: Could not parse JSON PID info: <a href="http://www.bbc.co.uk/programmes/b097rs7k.json">http://www.bbc.co.uk/programmes/b097rs7k.json</a><br />
WARNING: Could not determine PID type (b097rs7k). Trying to record PID directly.<br />
Matches:<br />
2457:   Gardeners' World: 2017 - Episode 28, BBC Two, b097rs7k<br />
INFO: 1 matching programmes<br />
WARNING: Could not parse programme metadata from <a href="http://www.bbc.co.uk/programmes/b097rs7k.json">http://www.bbc.co.uk/programmes/b097rs7k.json</a><br />
(malformed JSON string, neither array, object, number, string or atom, at character offset 0 (before "&lt;!DOCTYPE HTML SYSTE...")<br />
at C:\Program Files (x86)\get_iplayer\get_iplayer.pl line 4326.)<br />
WARNING: No programmes are available for this PID with version(s): default<br />
<br />
C:\WINDOWS\system32&gt;<br />
<br />
<br />
Any ideas please?<br />
And I'm not sure how to produce logs that you request for when investigating a problem.<br />
Thanks.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-30</h2></div><div class="dateline">05-11-2017, 06:05 PM</div>
</div>
<div class="message"><blockquote class="mycode_quote"><cite><span> (05-11-2017, 05:52 PM)</span></cite>And I'm not sure how to produce logs that you request for when investigating a problem.<br />
Thanks.</blockquote><br />
This post will walk you through what the command does so you will be able to easily use it to create the log file. <br />
<br />
<a href="thread-1577.html">/threa...ml#pid7024</a></div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-991</h2></div><div class="dateline">05-11-2017, 06:11 PM</div>
</div>
<div class="message">Thank you Squarepenguin I shall take a look at that soon because I thjink I've answered my own one question to my last highlighted problem.<br />
The 'ERROR: Could not parse JSON PID.......' problem does seem to be an internet connection problem as I've tried it through my phone when tethered weith my Laptop &amp; I'm getting the programmes to download.<br />
I will do the logs for the other problem of disconnecting a.s.a.p.<br />
Thanks.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">05-11-2017, 06:48 PM</div>
</div>
<div class="message">The "WARNING: Unexpected size for file segment" messages are symptoms of poor upstream connectivity. Don't bother producing a log for those. It is unlikely you would be able to replicate the exact same errors, and there is nothing get_iplayer can do to help, anyway. If you don't mind gaps or potentially unplayable files, use <kbd>--no-verify</kbd> to skip the segment size checks. Not recommended, of course.<br />
<br />
The "ERROR: Could not parse JSON PID info" messages indicate that request for a JSON file has been redirected by the BBC servers to an HTML page, probably an error page of some sort. Unless the request is getting mangled on the way to the BBC, I'm not sure if connectivity can be blamed. However, it's not worth producing a log for that error either because get_iplayer won't display enough detail. If you can load that .json URL in your browser and receive some kind of error message, post a screen grab of that.<br />
<br />
The fact get_iplayer works on one connection and not another tells me that there is nothing wrong with get_iplayer itself. I think you just need a better connection.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-991</h2></div><div class="dateline">05-11-2017, 11:15 PM</div>
</div>
<div class="message">Thanks for the quick reply Dinky &amp; Squarepenguin.<br />
When you had replied Dinky I managed to read what you had put but I couldn't reply until now as I had to disconnect from the Net until I got home.<br />
Anyway, I did suspect &amp; you are nearly 100 percent correct in saying that the "WARNING: Unexpected size for file segment" error is more than likely to do with poor connectivity although using the live performance graph in Task Manager didn't show any dropped connections at the time of the error occuring, otherwise it would've been clear to me what had happened &amp; why I got that error message. I'm going to assume that the error I've posted above is GiP v3.06 equivalent to the GiP v2.97/2.99 which used to say "Connection Timed Out". So again if I got that error message like I used to at times with GiP v2.97/2.99 then I would know what was going on. But what you've said Dinky has confirmed what I sort iof thought what was happening &amp; I totally understand that no logs need to be produced as a bad connection is nothing to do with GiP. And may I say that I didn't imply or meant to imply that the problems I have was to do with GiP &amp; the latest version. I post my problem on here because I have to admit there are a lot of people who are more experienced &amp; informed than I &amp; if anybody has experienced the same thing &amp; has a solution to pass on then that's what I would be looking for. So problems posted on here by myself &amp; people like me may not have anything directly to do with GiP. And like most people before me we appreciate people like Dinky who have maintained this software whereas the rest of us less experienced etc could not do it.<br />
<br />
I take on board the other problem i.e. "ERROR: Could not parse JSON PID info" Dinky &amp; I'll look into that because the internet connection I had when I got that error I didn't &amp; haven't had prior to today. At some point this week I shall be in the position to connect via that internet connection again &amp; I'll see what, if any, error messages I will get.<br />
<br />
I'll go now &amp; I'll just say "Thanks" again to those that maintain GiP &amp; are willing to help out those people less experienced than them.</div>
</div>
</div>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-8.html">Windows Forums</a> &gt; <a href="forum-5.html">Windows General Help</a> &gt; WARNING: Unexpected size for file segment</div>
</div>
<div class="footer">
<div class="footer-text">
<p class="footernote"> Site design Copyright &copy; SquarePenguin; <a href="http://creativecommons.org/licenses/by/4.0/">some rights reserved.</a></p>
<p class="footernote"><a href="https://www.squarepenguin.co.uk/attribution/">Attribution of Licensed Works</a></p>
</div>
</div>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
</body>
</html>
