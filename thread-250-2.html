<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>get_iplayer forums - Webscraping TV/Radio Cache</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="screen.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" sizes="192x192" href="/nice-highres.png" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>
<body>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
<nav class="navbar">
<div class="nav-container">
<ul class="">
<li> <a href="https://www.squarepenguin.co.uk/"> Home </a></li>
<li> <a href="https://www.squarepenguin.co.uk/blog/" class=""> Blog </a></li>
<li> <a href="https://www.squarepenguin.co.uk/features/" class=""> Features </a></li>
<li> <a href="https://www.squarepenguin.co.uk/faqs/" class=""> FAQ </a></li>
<li> <a href="https://www.squarepenguin.co.uk/downloads/" class=""> Downloads </a></li>
<li> <a href="https://www.squarepenguin.co.uk/wiki/" class=""> Wiki </a></li>
<li> <a href="https://www.squarepenguin.co.uk/guides/" class=""> Guides </a></li>
<li> <a href="https://forums.squarepenguin.co.uk/" class=""> Forums </a></li>
</ul>
</div>
</nav>
<div id="container">
<h1 class="forumtitle">get_iplayer forums</h1>
<h3 class="forumsubtitle">Forum archived. Posting disabled.</h3>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-23.html">Off-Topic</a> &gt; <a href="forum-25.html">Any Other Business</a> &gt; Webscraping TV/Radio Cache</div>
<div id="pagetitle"><h2>Webscraping TV/Radio Cache</h2></div>
<div id="content">
<div class="multipage"><strong>Pages:</strong> <a href="thread-250-1.html">1</a> <strong>2</strong> </div><div class="post">
<div class="header">
<div class="author"><h2>user-637</h2></div><div class="dateline">03-11-2014, 09:02 PM</div>
</div>
<div class="message">Hello again,<br />
<br />
I do not know if this is needed by others now that the new version of get_iPlayer has been released, but anyway here is the Perl code that refreshes both the "tv.cache" and "radio.cache" files to keep everything working almost like before the BBC made changes to the way it announced the BBC iPlayer programs.<br />
<br />
There are still some limitations, for example only (maximum) 20 episodes of each TV show are cached, only (maximum) 10 episodes of each radio show are cached, so sorry again to all Bargain Hunt fans ;). Also, after recording with the PVR manager the file-name is almost the same as it should be, but the beginning of the file-name is always âBBC_iPlayer_Feedsâ which is something I cannot change!!! At least the icon image of the recorded file is correct.<br />
<br />
<br />
<span style="font-weight: bold;" class="mycode_b">INSTRUCTIONS:</span><br />
<br />
I guess that this only works with a Windows PC, but I did read that it can also work on other operating systems?? I have two files that I copy into the get_iplayer program files directory which is âC:\Program Files (x86)\get_iplayerâ (on this machine). I then remove the â.txtâ from the end of both files so that they are simply named âRefresh_Cache_V0_5.plâ and âRefresh_Cache_V0_5.pl.cmdâ. I will try to upload the two files with this message. I have renamed the files in this way so that the files can easily be downloaded without any "anti-virus" software getting over paranoid!<br />
<br />
I then double click the âRefresh_Cache_V0_5.pl.cmdâ file to open the command, which just starts running the Perl code (âRefresh_Cache_V0_5.plâ). You can then enter 't' or 'T' from the keyboard to refresh the TV cahce or 'r' or 'R' from the keyboard to update the radio cache. I then press ENETER and my computer then sits there for a very long time (about 20 minutes for the TV cache and a few hours for the radio cache) scraping all the Data from the BBC iPlayer website and storing the results on the hard-disk, this refreshes the cache that get i-player uses to store all the data from the BBC iPlayer system. You can watch the progress on the screen. After this, I can then start the âPVR Managerâ and use get_iplayer exactly as before.<br />
<br />
***********<br />
<br />
Thank you for the feedback, keep it coming.<br />
<br />
Big thanks to all those who helped to make get_iPlayer!!!!! :)<br />
<br />
Tiiveni.<br/>
<a href="static/thread-250-Refresh_Cache_V0_5.pl_.txt">Refresh_Cache_V0_5.pl_.txt</a>"<br/>
<a href="static/thread-250-Refresh_Cache_V0_5.pl_.cmd_.txt">Refresh_Cache_V0_5.pl_.cmd_.txt</a>"
</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">03-11-2014, 09:56 PM</div>
</div>
<div class="message">Thanks for sharing your code.  We may be reduced to scraping the iPlayer site at some point, so it's good to have someone breaking trail.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-645</h2></div><div class="dateline">04-11-2014, 01:27 AM</div>
</div>
<div class="message">Radio as well as TV!<br />
<br />
Cue much rejoicing in the Iain-F household, especially as the other half is about to fly to the US for a few weeks and will miss her progs.<br />
<br />
Well done to all.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-550</h2></div><div class="dateline">04-11-2014, 10:43 AM</div>
</div>
<div class="message">Sadly not here.<br />
<br />
After leaving it to run the radio feeds overnight, I found a two-line 1kb radio.cache file.<br />
<br />
Neil</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-637</h2></div><div class="dateline">04-11-2014, 11:03 AM</div>
</div>
<div class="message">Oh dear wingtech, I am sorry. <br />
<br />
It ran OK here a few times, but did take a couple of hours each time. I can upload the results here (radio.cache), but I have seen that the new version of get_iPlayer (v2.90) works perfectly and downloads the radio.cache in about 1 minute - So I recommend getting the latest version.<br />
<br />
Good luck!<br />
<br />
Tiiveni.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-550</h2></div><div class="dateline">04-11-2014, 11:11 AM</div>
</div>
<div class="message">Spotted that since I posted. I'll install it when I have a moment.<br />
<br />
Thanks for your efforts.<br />
<br />
Neil</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-647</h2></div><div class="dateline">13-02-2015, 08:07 PM</div>
</div>
<div class="message">it's possible to use the API which iplayer app for Android uses...<br />
<a href="/topic/using-the-bbc-api/">/topic...e-bbc-api/</a><br />
<br />
my, er, friend, has a web-controlled scheduler and a back-end job. Just needs some help with the API</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">15-02-2016, 07:45 PM</div>
</div>
<div class="message">@Tiiveni Did you do any more development on this?</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-637</h2></div><div class="dateline">23-02-2016, 07:44 PM</div>
</div>
<div class="message">Hi tvfan,<br />
<br />
Sorry, I have left this and moved on to other things (like the hls downloader written in .php). If ever things go down completely then I think that we can pick this up again, if that is needed. I would like to see a program running on a single central server that collects all of the radio programs and TV programs and makes both the "tv.cache" and "radio.cache" files for downloading. This would allow all of the programs to be listed and not just the last 7 days. Collecting the data takes some hours and it would not make sense for every user to do this, rather a single central server. <br />
<br />
But I think that get_iplayer works really great just now! And I am very grateful! :o)   <br />
<br />
Thanks, Tiiveni</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-832</h2></div><div class="dateline">07-08-2016, 02:03 PM</div>
</div>
<div class="message">Some of you may find this useful, it is a development of tiiveni's webscraper script. It will only work for GiP 2.95 at the moment due to changed cache format. It requires the perl datetime module which is not in GiP's built in perl, so I have installed a separate copy of perl for this script to use.<br />
<br />
I haven't updated the radio side of the program so I would not recommend trying it.<br />
<br />
I would strongly advise you back up your cache files before using this script.<br />
<br />
Why use this script?; Well it will allow you to update your TV cache should Auntie kill the feeds again, but also it will add the vast majority of archive and other web only content to the cache, allowing easy downloading with the PVR (I was able to download all of this years Glastonbury with a single wildcard search from the web PVR manager), which I'm sure some of you Olympic fans will find handy!<br />
<br />
Unlike earlier versions of this script 0.6 does not simply overwrite the existing TV cache file but reads it in preserving the earlier cache entries, however it does not yet rename the existing cache file as GiP now does. My TV cache file now contains 5322 programmes dating back 37 days.<br />
<br />
However there are some online programmes GiP doesn't get on with even though they now appear to have valid entries in the cache file, for example episodes of 'Top Gear: Extra Gear' and 'Witless', which won't display in search results.<br />
<br />
I'm a complete Perl novice but this has been great fun to work on.<br />
<br />
Enjoy but don't expect much support!<br/>
<a href="static/thread-250-Refresh_Cache_V0_6.pl.txt">Refresh_Cache_V0_6.pl.txt</a><br/>
<a href="static/thread-250-Refresh_Cache_V0_6.pl_.cmd.txt">Refresh_Cache_V0_6.pl_.cmd.txt</a>
</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-1398</h2></div><div class="dateline">05-09-2016, 03:31 PM</div>
</div>
<div class="message">Thanks Sawtooth. (and original author)  I just ran this on my RaspberryPi running osmc and it works well for TV programes. I only had to update the following and it worked otherwise as is:<br />
<br />
&#36;UserProfile = &#36;ENV{'USERPROFILE'};<br />
<br />
changed to:<br />
<br />
&#36;UserProfile = &#36;ENV{'HOME'};<br />
<br />
It should be easy to actually check if 'USERPROFILE' environment variable exists and if not try HOME. That  would make the script a bit less tied to an OS. Or you could check if &#36;UserPriofile is empty and try settig it to HOME if it is.</div>
</div>
<div class="multipage"><strong>Pages:</strong> <a href="thread-250-1.html">1</a> <strong>2</strong> </div></div>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-23.html">Off-Topic</a> &gt; <a href="forum-25.html">Any Other Business</a> &gt; Webscraping TV/Radio Cache</div>
</div>
<div class="footer">
<div class="footer-text">
<p class="footernote"> Site design Copyright &copy; SquarePenguin; <a href="http://creativecommons.org/licenses/by/4.0/">some rights reserved.</a></p>
<p class="footernote"><a href="https://www.squarepenguin.co.uk/attribution/">Attribution of Licensed Works</a></p>
</div>
</div>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
</body>
</html>
