<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>get_iplayer forums - BBC changes break track listings</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="screen.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
<nav class="navbar">
<div class="nav-container">
<ul class="">
<li> <a href="https://www.squarepenguin.co.uk/"> Home </a></li>
<li> <a href="https://www.squarepenguin.co.uk/blog/" class=""> Blog </a></li>
<li> <a href="https://www.squarepenguin.co.uk/features/" class=""> Features </a></li>
<li> <a href="https://www.squarepenguin.co.uk/faqs/" class=""> FAQ </a></li>
<li> <a href="https://www.squarepenguin.co.uk/downloads/" class=""> Downloads </a></li>
<li> <a href="https://www.squarepenguin.co.uk/wiki/" class=""> Wiki </a></li>
<li> <a href="https://www.squarepenguin.co.uk/guides/" class=""> Guides </a></li>
<li> <a href="https://forums.squarepenguin.co.uk/" class=""> Forums </a></li>
</ul>
</div>
</nav>
<div id="container">
<h1 class="forumtitle">get_iplayer forums</h1>
<h3 class="forumsubtitle">Forum archived. Posting disabled.</h3>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-16.html">General Forums</a> &gt; <a href="forum-15.html">General Topics </a> &gt; BBC changes break track listings</div>
<div id="pagetitle"><h2>BBC changes break track listings</h2></div>
<div id="content">
<div class="post">
<div class="header">
<div class="author"><h2>user-1868</h2></div><div class="dateline">25-01-2020, 04:48 PM</div>
</div>
<div class="message">The following errors are shown if you ask for a track listing:<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>INFO: Downloading track data<br />
.<br />
.<br />
.<br />
INFO: Downloading URL (3/3): https://www.bbc.co.uk/programmes/m000d7zf/segments.inc<br />
<br />
ERROR: Failed to download URL (3/3): https://www.bbc.co.uk/programmes/m000d7zf/segments.inc<br />
ERROR: Response: 404 Not Found<br />
ERROR: Ignore this error if programme download is successful<br />
WARNING: Track data not found</code></div></div><br />
As far as I can tell, get_iplayer doesn't use the segments.inc file at all. It pulls the data out of the segments.json file. So, the failure is simply down to trying to read the segments.inc file. It looks as though this was done to get the second pid associated with the programme. Asking for the segments file returned a different URL. This second pid can be read from the json file which contains the basic metadata. e.g.<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>https://www.bbc.co.uk/programmes/m000d7zf.json</code></div></div>under: version.0.pid - for this programme it's m000d7zd<br />
<br />
Interestingly, there's a json file with that pid, and the segments.json file simply contains the segments section of it.<br />
<br />
However, for a quick and dirty fix replacing segments.inc in get_iplayer (there's only 1 occurence) with segments.json get's it working again. The redirection works with a request for segments.json, e.g.<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>https://www.bbc.co.uk/programmes/m000d7zf/segments.json</code></div></div></div>
</div>
</div>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-16.html">General Forums</a> &gt; <a href="forum-15.html">General Topics </a> &gt; BBC changes break track listings</div>
</div>
<div class="footer">
<div class="footer-text">
<p class="footernote"> Site design Copyright &copy; SquarePenguin; <a href="http://creativecommons.org/licenses/by/4.0/">some rights reserved.</a></p>
<p class="footernote"><a href="https://www.squarepenguin.co.uk/attribution/">Attribution of Licensed Works</a></p>
</div>
</div>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
</body>
</html>
