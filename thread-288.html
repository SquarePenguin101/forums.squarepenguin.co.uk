<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>get_iplayer forums - Problem with programmes that are over 7 days old</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
<meta name="robots" content="index,follow" />
<link type="text/css" rel="stylesheet" rev="stylesheet" href="screen.css"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" sizes="192x192" href="/nice-highres.png" />
<link rel="apple-touch-icon" href="/apple-touch-icon.png" />
</head>
<body>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
<nav class="navbar">
<div class="nav-container">
<ul class="">
<li> <a href="https://www.squarepenguin.co.uk/"> Home </a></li>
<li> <a href="https://www.squarepenguin.co.uk/blog/" class=""> Blog </a></li>
<li> <a href="https://www.squarepenguin.co.uk/features/" class=""> Features </a></li>
<li> <a href="https://www.squarepenguin.co.uk/faqs/" class=""> FAQ </a></li>
<li> <a href="https://www.squarepenguin.co.uk/downloads/" class=""> Downloads </a></li>
<li> <a href="https://www.squarepenguin.co.uk/wiki/" class=""> Wiki </a></li>
<li> <a href="https://www.squarepenguin.co.uk/guides/" class=""> Guides </a></li>
<li> <a href="https://forums.squarepenguin.co.uk/" class=""> Forums </a></li>
</ul>
</div>
</nav>
<div id="container">
<h1 class="forumtitle">get_iplayer forums</h1>
<h3 class="forumsubtitle">Forum archived. Posting disabled.</h3>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-16.html">General Forums</a> &gt; <a href="forum-15.html">General Topics </a> &gt; Problem with programmes that are over 7 days old</div>
<div id="pagetitle"><h2>Problem with programmes that are over 7 days old</h2></div>
<div id="content">
<div class="multipage"><strong>Pages:</strong> <strong>1</strong> <a href="thread-288-2.html">2</a> </div><div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">01-12-2014, 05:15 PM</div>
</div>
<div class="message">Have started having problems with programmes that are over 7 days old again today.<br />
<br />
It seems that some programmes that have gone past 7 days are refusing to download the default version even though it shows as available in <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--info</code></div></div> and shows modes as available for the default version.<br />
<br />
An example is <a href="http://www.bbc.co.uk/iplayer/episode/b0079ckz/the-slammer-series-1-episode-1">http://www.bbc.co.uk/iplayer/episode/b00...-episode-1</a> which is fully playable on iPlayer but cannot seem to be downloaded.<br />
<br />
Output with <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--info</code></div></div><br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>C:&#92;Program Files (x86)&#92;get_iplayer&gt;get_iplayer --modes=best --output=i:/videos --p<br />
id b0079ckz --info<br />
get_iplayer v2.90, Copyright (C) 2008-2010 Phil Lewis<br />
&nbsp;&nbsp;This program comes with ABSOLUTELY NO WARRANTY; for details use --warranty.<br />
&nbsp;&nbsp;This is free software, and you are welcome to redistribute it under certain<br />
&nbsp;&nbsp;conditions; use --conditions for details.<br />
<br />
INFO Trying to stream pid using type tv<br />
INFO: pid found in cache<br />
Matches:<br />
1992:&nbsp;&nbsp; The Slammer: Series 1 - Episode 1, CBBC, Children's,Entertainment &amp; Come<br />
dy, default<br />
INFO: File name prefix = The_Slammer_Series_1_-_Episode_1_b0079ckz_default<br />
<br />
available:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Unknown<br />
brand:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The Slammer<br />
categories:&nbsp;&nbsp;&nbsp;&nbsp; Children's,Entertainment &amp; Comedy<br />
category:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Children's<br />
channel:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBBC<br />
desc:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Welcome to The Slammer, a prison for entertainers. Each week fou<br />
r acts are chosen to perform for their freedom in front of a live studio audienc<br />
e.<br />
descmedium:&nbsp;&nbsp;&nbsp;&nbsp; Welcome to The Slammer, a prison for entertainers. Each week fou<br />
r acts are chosen to perform for their freedom in front of a live studio audienc<br />
e.<br />
descshort:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Welcome to the prison for entertainers. Each week, four acts per<br />
form for their freedom.<br />
dir:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I:&#92;videos<br />
dldate:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-12-01<br />
dltime:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 16:10:36<br />
duration:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1800<br />
durations:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default: 1800<br />
durations:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signed: 1680<br />
episode:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Episode 1<br />
episodenum:&nbsp;&nbsp;&nbsp;&nbsp; 1<br />
episodeshort:&nbsp;&nbsp; Episode 1<br />
expiry:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 2014-12-24T11:30:00Z<br />
expiryrel:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in 22 days 19 hours<br />
ext:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;EXT<br />
filename:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I:&#92;videos&#92;The_Slammer_Series_1_-_Episode_1_b0079ckz_default.EXT<br />
filepart:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; I:&#92;videos&#92;The_Slammer_Series_1_-_Episode_1_b0079ckz_default.partia<br />
l.EXT<br />
fileprefix:&nbsp;&nbsp;&nbsp;&nbsp; The_Slammer_Series_1_-_Episode_1_b0079ckz_default<br />
firstbcast:&nbsp;&nbsp;&nbsp;&nbsp; default: 2006-09-22T16:55:00+01:00<br />
firstbcast:&nbsp;&nbsp;&nbsp;&nbsp; signed: 2008-03-25T10:00:00Z<br />
firstbcastdate: default: 2006-09-22<br />
firstbcastdate: signed: 2008-03-25<br />
firstbcastrel:&nbsp;&nbsp;default: 8 years 70 days 0 hours ago<br />
firstbcastrel:&nbsp;&nbsp;signed: 6 years 251 days 6 hours ago<br />
index:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1992<br />
lastbcast:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default: 2014-11-24T11:00:00Z<br />
lastbcast:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signed: 2008-04-10T10:00:00+01:00<br />
lastbcastdate:&nbsp;&nbsp;default: 2014-11-24<br />
lastbcastdate:&nbsp;&nbsp;signed: 2008-04-10<br />
lastbcastrel:&nbsp;&nbsp; default: 7 days 5 hours ago<br />
lastbcastrel:&nbsp;&nbsp; signed: 6 years 235 days 7 hours ago<br />
longname:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The Slammer: Series 1<br />
modes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default: flashhigh1,flashhigh2,flashstd1,flashstd2,flashvhigh1,f<br />
lashvhigh2,rtsphigh1,rtsphigh2,rtspstd1,rtspstd2,rtspvhigh1,rtspvhigh2,subtitles<br />
1<br />
modes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signed:<br />
modesizes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default: flashhigh1=175MB,flashhigh2=175MB,flashstd1=105MB,flash<br />
std2=105MB,flashvhigh1=330MB,flashvhigh2=330MB,rtsphigh1=175MB,rtsphigh2=175MB,r<br />
tspstd1=105MB,rtspstd2=105MB,rtspvhigh1=330MB,rtspvhigh2=330MB<br />
modesizes:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signed:<br />
name:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The Slammer: Series 1<br />
nameshort:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The Slammer<br />
pid:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;b0079ckz<br />
player:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; http://www.bbc.co.uk/iplayer/episode/b0079ckz<br />
senum:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s01e01<br />
series:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Series 1<br />
seriesnum:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1<br />
thumbfile:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;I:&#92;videos&#92;The_Slammer_Series_1_-_Episode_1_b0079ckz_default.jpg<br />
thumbnail:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://ichef.bbci.co.uk/images/ic/150x84/p01lcfwg.jpg<br />
timeadded:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;6 days 17 hours ago (1416869634)<br />
title:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;The Slammer: Series 1: Episode 1<br />
type:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; tv<br />
verpids:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default: b006qyfg<br />
verpids:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signed: b009nsp7<br />
version:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default<br />
versions:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default,signed<br />
web:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.bbc.co.uk/programmes/b006mkqb<br />
<br />
INFO: 1 Matching Programmes<br />
<br />
C:&#92;Program Files (x86)&#92;get_iplayer&gt;</code></div></div><br />
<br />
<br />
<br />
Shows that default does exist and has modes available.<br />
<br />
Output from download attempt with <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--verbose</code></div></div><br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>C:&#92;Program Files (x86)&#92;get_iplayer&gt;get_iplayer --modes=best --output=i:/videos --p<br />
id b0079ckz --get --verbose<br />
get_iplayer v2.90, Copyright (C) 2008-2010 Phil Lewis<br />
&nbsp;&nbsp;This program comes with ABSOLUTELY NO WARRANTY; for details use --warranty.<br />
&nbsp;&nbsp;This is free software, and you are welcome to redistribute it under certain<br />
&nbsp;&nbsp;conditions; use --conditions for details.<br />
<br />
INFO: encodinglocale = cp1252<br />
INFO: encodinglocalefs = cp1252<br />
INFO: encodingconsoleout = cp850<br />
INFO: encodingconsolein = cp850<br />
INFO: &#36;{^UNICODE} = 0<br />
INFO: User prefs dir: C:&#92;Users&#92;User1/.get_iplayer<br />
INFO: System options dir: C:&#92;ProgramData/get_iplayer/options<br />
Current options:<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodingconsolein = cp850<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodingconsoleout = cp850<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodinglocale = cp1252<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;encodinglocalefs = cp1252<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expiry = 604800<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;get = 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mmsnothread = 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modes = best<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nopurge = 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;output = i:/videos<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pid = b0079ckz<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rtmpdump = .&#92;RTMPDump&#92;rtmpdump-20140302-git-79459a2-win32&#92;bin&#92;rtmpdump.e<br />
xe<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verbose = 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;vlc = .&#92;VLC&#92;vlc-2.1.5&#92;vlc.exe<br />
<br />
INFO: Search args: ''<br />
INFO: Will try prog types: tv<br />
INFO: Loaded history for first check.<br />
INFO: Loading recordings history<br />
INFO: Programme not in history<br />
INFO: Got 2290 file cache entries for tv<br />
INFO Trying to stream pid using type tv<br />
INFO: pid found in cache<br />
Matches:<br />
1992:&nbsp;&nbsp; The Slammer: Series 1 - Episode 1, CBBC, Children's,Entertainment &amp; Come<br />
dy, default<br />
<br />
INFO: 1 Matching Programmes<br />
INFO: Programme not in history<br />
INFO: iPlayer metadata URL = http://www.bbc.co.uk/iplayer/playlist/b0079ckz<br />
INFO: Getting page http://www.bbc.co.uk/iplayer/playlist/b0079ckz<br />
INFO: iPlayer metadata URL (JSON) = http://www.bbc.co.uk/programmes/b0079ckz/pla<br />
ylist.json<br />
INFO: Getting page http://www.bbc.co.uk/programmes/b0079ckz/playlist.json<br />
<br />
WARNING: No programmes are available for this pid with version(s): default<br />
ERROR: Could not get version pid metadata<br />
<br />
C:&#92;Program Files (x86)&#92;get_iplayer&gt;</code></div></div><br />
<br />
<br />
<br />
Also <a href="http://www.bbc.co.uk/iplayer/episode/b038bf5h/escape-to-the-country-series-14-3-dumfries-and-galloway">http://www.bbc.co.uk/iplayer/episode/b03...d-galloway</a> is refusing to download saying that only the <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>shortened,audiodescribed</code></div></div> versions are available. The <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--info</code></div></div> shows that there is a default version there but there are no modes for it.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">02-12-2014, 12:25 AM</div>
</div>
<div class="message">The Slammer downloads fine here.  There are no default version streams for Escape to the Country.  It happens sometimes, particular with old programmes - blame the Beeb.  If you see a reference to a shortened version it suggests you are using a recent version of get_iplayer from GitHub, but the output from your Slammer download suggests that you are using 2.90 as released.  Save us both some time and go get the very latest version of get_iplayer from GitHub.  See Git HEAD section in wiki installation page.  If those programmes still don't download, run with <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--verbose</code></div></div> and attach the log as a .txt file.  I can't tell anything from the above.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">02-12-2014, 01:24 AM</div>
</div>
<div class="message">The version I was using was the git HEAD version from 28/11/2014. Have now updated to the most recent version and still have the same problem.<br />
<br />
When I update from the git HEAD I save the file and then replace it manually in the get_iplayer folder rather than running the copy and rename script in the wiki. Could that be why the update doesn't show in the output?<br />
<br />
The <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--verbose</code></div></div> output for the Slammer is the same as above.<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>ERROR: Could not get version pid metadata</code></div></div> is the line in there that I'm unsure of though. Seems to be after it's checked the JSON playlist.<br />
<br />
Interestingly, if I change the script for a slightly older git HEAD version which I downloaded on the 12th, the Slammer downloads fine.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">02-12-2014, 01:43 PM</div>
</div>
<div class="message">That's not the output you should get from Git HEAD, so something is going wrong when you update.  HEAD doesn't pull JSON playlists unless you don't have the XML::Simple Perl module installed.  If that is the case, then you somehow have an incomplete or damaged installation.  A version from 12 Nov won't have those changes, so perhaps you do have an incomplete installation.  I can't duplicate the problem anyway - any version works for me.  Grab Git HEAD from today (2 Dec) or later, then run <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--info</code></div></div> for that programme.  If the <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--info</code></div></div> output has a "desclong" field, then you're running the correct script.  And in your get_iplayer console window, run <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>perl -MXML::Simple -e 1</code></div></div>.  If you don't see an error message, then the module is installed.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">02-12-2014, 10:10 PM</div>
</div>
<div class="message">"desclong" is showing in the --info and <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>perl -MXML::Simple -e 1</code></div></div> shows no errors.<br />
<br />
Have also installed 2.90 on another machine and updated it with the most recent script with the same error.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">03-12-2014, 12:46 AM</div>
</div>
<div class="message">Try Git HEAD a few more times with <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--verbose</code></div></div> and these additional options:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>Attempt 1: --force --overwrite<br />
Attempt 2: --no-playlist-metadata --force --overwrite<br />
Attempt 3: --scrape-versions --force --overwrite<br />
Attempt 4: --playlist-metadata --scrape-versions --force --overwrite</code></div></div><br />
<br />
<br />
Post the output as .txt files.  Don't worry about the file names.  I can tell from the contents which is which.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">03-12-2014, 01:46 AM</div>
</div>
<div class="message">Attempts 3 &amp; 4 worked and the programme downloaded. All outputs attached.
<br/><br/>
<a href="static/thread-288-attempts12.txt">attempts12.txt</a><br/>
<a href="static/thread-288-attempt3.txt">attempt3.txt</a><br/>
<a href="static/thread-288-attempt4.txt">attempt4.txt</a><br/>
</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">03-12-2014, 01:20 PM</div>
</div>
<div class="message">Thanks.  Those results at least confirm what is happening, but not why it is happening. It's still impossible for me to duplicate. Instead of this:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>INFO: 1 Matching Programmes<br />
INFO: iPlayer metadata URL = http://www.bbc.co.uk/iplayer/playlist/b0079ckz<br />
INFO: Getting page http://www.bbc.co.uk/iplayer/playlist/b0079ckz<br />
INFO: iPlayer metadata URL (JSON) = http://www.bbc.co.uk/programmes/b0079ckz/playlist.json</code></div></div><br />
<br />
<br />
<br />
<br />
- which means you are getting the old, semi-busted metadata extraction - you should see something like:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>INFO: 1 Matching Programmes<br />
INFO: Getting page http://www.bbc.co.uk/programmes/b0079ckz.xml</code></div></div><br />
<br />
<br />
<br />
<br />
Check a few BBC One or Two programmes to see if you get the same results, or whether the new metadata extraction is used. The implication of your test is that a check of the PID value is failing for some reason in your version of get_iplayer.  Just to check if sanity still reigns, run the following in your get_iplayer console window:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>perl -e "print 'b0079ckz' =~ /^[bp]0[a-z0-9]{6}&#36;/"</code></div></div><br />
<br />
<br />
<br />
<br />
It should print "1".<br />
<br />
I'm going to remove the <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--scrape...</code></div></div> options and re-enable the screen scraping by default when using the old metadata extraction method.  It turns out that many CBBC programmes now appear to be missing any playlist data, so screen scraping is the only way to go in that case.  Scraping is not needed with the new method. <br />
<br />
Also: you don't need <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--get</code></div></div> with <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--pid</code></div></div>.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">04-12-2014, 08:11 PM</div>
</div>
<div class="message">Sanity check comes back with "1"<br />
<br />
I still can't see any reference to the .xml playlist though when it tries to download a programme. Is seems to go straight for the JSON.<br />
<br />
It does use mediaselector5 though to get the actual download data.<br />
<br />
Have tried with last weeks Watchdog and Not Going Out. Output attached.
<br/><br/>
<a href="static/thread-288-watchdog-not-going-out-output.txt">watchdog-not-going-out-output.txt</a>
</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">05-12-2014, 12:16 AM</div>
</div>
<div class="message">The mediaselector reference was irrelevant - copy/paste error. "iPlayer metadata URL" refers to the XML playlist.  The URL doesn't have a .xml extension.<br />
<br />
Still unable to reproduce this behaviour, so whatever it is appears to be peculiar to your system. If you know some Perl, I can point you towards the place in the code to investigate.  Otherwise I'm afraid I must throw in the towel.  Can't fix a problem I can't see.<br />
<br />
I've updated GitHub and removed the <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--scrape...</code></div></div> options.  TV episode pages will be scraped by default (turn off with <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--no-scrape-versions</code></div></div>), so hopefully no more problems with CBBC programmes.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">05-12-2014, 01:15 AM</div>
</div>
<div class="message">Thanks for your help.<br />
<br />
I don't know any Perl.<br />
<br />
The odd thing is that it is affecting 2 machines in the same way. One is Win 7 and the other is XP.<br />
<br />
Maybe when version 2.91 is released, whatever it is that's causing the problem might be solved by a proper install?<br />
<br />
I will update to the latest HEAD version and see how it goes.<br />
<br />
Thanks</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">05-12-2014, 02:24 AM</div>
</div>
<div class="message">What do you mean by "proper install"?  If you didn't use the get_iplayer installer and then update over it with Git HEAD, or if you're not using the version of Perl delivered with the installer, then all bets are off.  And you shouldn't count on the next release to fix anything.  The particular bit of code in question isn't going to change before then. It already works fine here on XP/7/8.  Even so, the old metadata code will keep working for you - it will be just be a bit slower and less accurate.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">05-12-2014, 10:16 AM</div>
</div>
<div class="message"><blockquote class="mycode_quote"><cite>Quote:</cite><a href="/topic/problem-with-programmes-that-are-over-7-days-old/#post-10656">Quote:</a> What do you mean by âproper installâ?</blockquote>
I mean get_iplayer_latest.exe. It could be something I've done when updating to the HEAD version that's causing me these problems. The next installer will do it properly rather than me replacing the script.<br />
<br />
I upgraded to 2.90 and then updated to the HEAD version over the top of that. All I did was save the git HEAD file and replace the original one with that.<br />
<br />
Is there a command I can use to force the new metadata method to be used?</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">05-12-2014, 01:11 PM</div>
</div>
<div class="message">No.   It's the default.  It only requires the programme have recognisable a PID.  So in your case, either something is wrong with all your PIDs, or as you suggest, you've mad an error in installation.  You can try replacing this line:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>} elsif ( &#36;prog-&gt;{pid} =~ /^[bp]0[a-z0-9]{6}&#36;/ &amp;&amp; ! &#36;opt-&gt;{playlistmetadata} ) {</code></div></div><br />
<br />
<br />
<br />
with this:<br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>} elsif ( ! &#36;opt-&gt;{playlistmetadata} ) {</code></div></div><br />
<br />
<br />
<br />
to avoid the PID check, but I've no idea if that will work.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">08-12-2014, 09:51 PM</div>
</div>
<div class="message">I think I might of sorted it.<br />
<br />
It seems that the new metadata method relies on AtomicParsley being installed. Without AtomicParsley, it drops back to the old method.<br />
<br />
Now that AtomicParsley is installed I am getting <br />
<br />
<div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>Matches:<br />
1849:&nbsp;&nbsp; The One Show - 01/12/2014, BBC One, Arts Culture &amp; the Media,Factual, de<br />
fault<br />
<br />
INFO: 1 Matching Programmes<br />
INFO: Programme metadata URL = http://www.bbc.co.uk/programmes/b04snnkp.xml<br />
INFO: Getting page http://www.bbc.co.uk/programmes/b04snnkp.xml<br />
INFO: Getting page http://open.live.bbc.co.uk/mediaselector/5/select/version/2.0<br />
/mediaset/pc/vpid/b04snnjm?cb=51123</code></div></div><br />
<br />
<br />
<br />
Had a problem yesterday though with an episode of Escape to the Country from last weekend. Unfortunately it is now no longer available but when I tried to download, there was no default version but there was a "lengthened" version available but this only had flashhigh and flashstd available. I had to revert to an older script to get the flashvhigh stream to download. (I think it was the original script that came with 2.90 that I reverted back to)</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">09-12-2014, 12:51 PM</div>
</div>
<div class="message"><blockquote class="mycode_quote"><cite>Quote:</cite><a href="/topic/problem-with-programmes-that-are-over-7-days-old/#post-10681">Quote:</a><br />
It seems that the new metadata method relies on AtomicParsley being installed. Without AtomicParsley, it drops back to the old method.</blockquote>
<br />
Well-spotted. Fixed in Git.<br />
<br />
<blockquote class="mycode_quote"><cite>Quote:</cite>Had a problem yesterday though with an episode of Escape to the Country from last weekend. Unfortunately it is now no longer available but when I tried to download, there was no default version but there was a âlengthenedâ version available but this only had flashhigh and flashstd available. I had to revert to an older script to get the flashvhigh stream to download. (I think it was the original script that came with 2.90 that I reverted back to)</blockquote>
<br />
If you don't give me an exact episode, I can't check it.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">09-12-2014, 03:36 PM</div>
</div>
<div class="message"><blockquote class="mycode_quote"><cite>Quote:</cite><a href="/topic/problem-with-programmes-that-are-over-7-days-old/#post-10682">Quote:</a><br />
If you donât give me an exact episode, I canât check it.</blockquote>
<br />
I thought that would probably be the case but I thought I'd report it anyway in case it came up again.<br />
<br />
It was <a href="http://www.bbc.co.uk/programmes/b00psvz4">http://www.bbc.co.uk/programmes/b00psvz4</a> but was only available for 7 days.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">09-12-2014, 03:52 PM</div>
</div>
<div class="message">From the metadata that remains, it looks like one version of the programme was marked as both lengthened and audio described, so the streams for the audio described version were used instead (flashhigh best available).  get_iplayer should now be able to pick out the audio described version separately, at least in some cases.</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-585</h2></div><div class="dateline">09-12-2014, 04:23 PM</div>
</div>
<div class="message">I think you are right. Default had no modes, lengthened only showed flashhigh and flashstd and I think the audiodescribed version showed the same.<br />
<br />
I did try <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--versions=lengthened</code></div></div> but it told me that flashvhigh was not available and I should try flashhigh or flashstd.<br />
<br />
The <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--info</code></div></div> data reflected this.<br />
<br />
Possibly if I had run <div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--playlist-metadata</code></div></div> on it it may well have found the flashvhigh version because that would also have scraped for versions wouldn't it?<br />
<br />
Reverting to the original 2.90 .pl file probably did this for me so the flashvhigh download worked. It downloaded it as the default version using the original .pl</div>
</div>
<div class="post">
<div class="header">
<div class="author"><h2>user-2</h2></div><div class="dateline">09-12-2014, 05:17 PM</div>
</div>
<div class="message"><div class="codeblock"><div class="title">Code:</div><div class="body" dir="ltr"><code>--playlist-metadata</code></div></div> would probably work in this case.  It doesn't work in every case, so I'm trying to work out the correct juju to avoid any extra scraping.  Latest code will discard any versions that don't have streams, and tries to to use any alternate version (e.g., "shortened") as default if listed default version doesn't have any streams, but there may be some as-yet-unseen permutations that will confuse it.</div>
</div>
<div class="multipage"><strong>Pages:</strong> <strong>1</strong> <a href="thread-288-2.html">2</a> </div></div>
<div class="navigation"><a href="index.html">get_iplayer forums</a> &gt; <a href="forum-16.html">General Forums</a> &gt; <a href="forum-15.html">General Topics </a> &gt; Problem with programmes that are over 7 days old</div>
</div>
<div class="footer">
<div class="footer-text">
<p class="footernote"> Site design Copyright &copy; SquarePenguin; <a href="http://creativecommons.org/licenses/by/4.0/">some rights reserved.</a></p>
<p class="footernote"><a href="https://www.squarepenguin.co.uk/attribution/">Attribution of Licensed Works</a></p>
</div>
</div>
<div class="frontnavwrap">
<div class="page-title">
<h1 style="color:#fff;">These forums are archived</h1>
<h3 style="color:#fff;">See <a style="color:#fff;" href="https://www.squarepenguin.co.uk/blog/squarepenguin-forums-archived/">this post</a> for further info</h3>
</div>
</div>
</body>
</html>
